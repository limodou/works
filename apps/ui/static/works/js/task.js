!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("works",[],e):"object"==typeof exports?exports.works=e():t.works=e()}(this,function(){return function(t){function e(s){if(n[s])return n[s].exports;var a=n[s]={i:s,l:!1,exports:{}};return t[s].call(a.exports,a,a.exports,e),a.l=!0,a.exports}var n={};return e.m=t,e.c=n,e.i=function(t){return t},e.d=function(t,n,s){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:s})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="/",e(e.s=24)}({0:function(t,e){t.exports=function(t,e,n,s){var a,i=t=t||{},o=typeof t.default;"object"!==o&&"function"!==o||(a=t,i=t.default);var r="function"==typeof i?i.options:i;if(e&&(r.render=e.render,r.staticRenderFns=e.staticRenderFns),n&&(r._scopeId=n),s){var c=Object.create(r.computed||null);Object.keys(s).forEach(function(t){var e=s[t];c[t]=function(){return e}}),r.computed=c}return{esModule:a,exports:i,options:r}}},18:function(t,e,n){"use strict";function s(t,e){return new Date(t)-new Date(e)}function a(t){var e=new Date(t);return e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()}function i(t){var e,n,s,i,o,r,c={},u=[];for(i=0,o=t.length;i<o;i++)s=t[i],r=a(s.modified_time),void 0===n||n!=r?(e=c[r]=[],n=r,u.push({label:r,items:e})):e=c[r],e.push(s);return u}Object.defineProperty(e,"__esModule",{value:!0});var o={finish:["fa-check bg-green","已完成"],ready:["fa-hourglass-o bg-gray","未开始"],delay:["fa-question bg-red","延迟"],start:["fa-spinner bg-blue","进行中"]};e.default={name:"task",data:function(){return{count:0,origin_tasks:[],tasks:[]}},computed:{count_title:function(){return this.count+" 条任务"},sorted_tasks:function(){return i(this.tasks)}},props:["index","notitle"],mounted:function(){this.load()},methods:{load:function(){var t=this;$.get("/task/get?index="+this.index).success(function(e){e.success&&(t.tasks=e.tasks.sort(s),t.count=e.tasks.length)})},item_icon:function(t){return"fa "+o[t.status][0]},item_title:function(t){return o[t.status][1]},change:function(t,e){var n,a=this;$.post("/task/change/"+t.id,{status:e}).success(function(e){if(e.success)for(var i=0,o=a.tasks.length;i<o;i++)if(n=a.tasks[i],n.id==t.id)return a.tasks.splice(i,1,e.data),void(a.tasks=a.tasks.sort(s))})}}}},24:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=n(9),a=n.n(s);Vue.component("Task",a.a)},30:function(t,e){},37:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"box box-solid"},[t.notitle?t._e():n("div",{staticClass:"box-header with-border"},[n("h3",{staticClass:"box-title"},[t._v("任务")]),t._v(" "),n("div",{staticClass:"box-tools pull-right"},[n("span",{staticClass:"badge bg-yellow",attrs:{"data-toggle":"tooltip",title:"","data-original-title":t.count_title}},[t._v(t._s(t.count))]),t._v(" "),t._m(0)])]),t._v(" "),n("div",{staticClass:"box-body",staticStyle:{"background-color":"#f7f7f7"}},[t._l(t.sorted_tasks,function(e){return t.count>0?[n("ul",{staticClass:"timeline"},[n("li",{staticClass:"time-label"},[n("span",{staticClass:"bg-red"},[t._v("\n                  "+t._s(e.label)+"\n                ")])]),t._v(" "),t._l(e.items,function(e){return n("li",[n("i",{class:t.item_icon(e),attrs:{"data-original-title":t.item_title(e)}}),t._v(" "),n("div",{staticClass:"timeline-item"},[n("span",{staticClass:"time"},[t._v("\n                "+t._s(e.responsible||"未指派")+"\n                "),n("i",{staticClass:"fa fa-clock-o"}),t._v(" "+t._s(e.modified_time)+"\n              ")]),t._v(" "),n("h3",{staticClass:"timeline-header"},[n("a",{attrs:{href:"/task/view/"+e.id,target:"_blank"}},[t._v(t._s(e.title))])]),t._v(" "),e.content?n("div",{staticClass:"timeline-body",domProps:{innerHTML:t._s(e.content)}}):t._e(),t._v(" "),n("div",{staticClass:"timeline-footer"},["start"==e.status?n("a",{staticClass:"btn btn-default btn-xs",on:{click:function(n){t.change(e,"finish")}}},[t._v("完成任务")]):t._e(),t._v(" "),"ready"==e.status?n("a",{staticClass:"btn btn-default btn-xs",on:{click:function(n){t.change(e,"start")}}},[t._v("开始任务")]):t._e(),t._v(" "),"delay"==e.status?n("a",{staticClass:"btn btn-default btn-xs",on:{click:function(n){t.change(e,"finish")}}},[t._v("完成任务")]):t._e()])])])})],2)]:t._e()}),t._v(" "),0==t.count?[t._v("\n        暂无任务\n      ")]:t._e()],2),t._v(" "),n("div",{staticClass:"box-footer"},[n("a",{staticClass:"btn btn-primary",attrs:{href:"/task/add?index="+t.index,target:"_blank"}},[t._v("分配任务")]),t._v(" "),n("button",{staticClass:"btn btn-info",on:{click:t.load}},[t._v("刷新")])])])},staticRenderFns:[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("button",{staticClass:"btn btn-box-tool",attrs:{type:"button","data-widget":"collapse"}},[n("i",{staticClass:"fa fa-minus"})])}]}},9:function(t,e,n){n(30);var s=n(0)(n(18),n(37),null,null);t.exports=s.exports}})});
//# sourceMappingURL=task.js.map